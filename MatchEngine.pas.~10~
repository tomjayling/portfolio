unit MatchEngine;

interface

uses
  UPlayer, UTeam, UGame, UDM, UFormationGraphic,
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls;

type
  TMatchEngineForm = class(TForm)
    ALbl: TLabel;
    BLbl: TLabel;
    StartBtn: TButton;
    AScoreLbl: TLabel;
    BScoreLbl: TLabel;
    procedure StartBtnClick(Sender: TObject);
  private
    { Private declarations }
  public
  procedure FormCreate(Sender: TObject);
  end;

var
  MatchEngineForm: TMatchEngineForm;
  TeamA, TeamB : Team;

implementation

{$R *.dfm}

{ TForm1 }

procedure TMatchEngineForm.FormCreate(Sender: TObject);
begin
  ALbl.Caption := 'Team 1';
  BLbl.Caption := 'Team 2';
  AScoreLbl.Caption := '0';
  BScoreLbl.Caption := '0';
  StartBtn.Enabled := true;
end;

procedure TMatchEngineForm.StartBtnClick(Sender: TObject);
var
a,b : Team;
RatingA,RatingB,
Agoals, Bgoals : integer;
  i, j: Integer;
  MyFile : TextFile;
  line : string;
begin
  assignFile(MyFile,'C:\Users\princ\Documents\Embarcadero\Studio\Projects\The Project\1.0\1.0\LineupA.txt');
  Reset(MyFile);
  for i := 1 to 11 do
    begin
      readln(MyFile, line);
      RatingA := RatingA + strToInt(line[length(line)]);
    end;
    for j := 1 to 11 do
    begin
      readln(MyFile, line);
      RatingB := RatingB + strToInt(line[length(line)]);
    end;
  closeFile(MyFile);
//  a := Team.Create('Arsenal');
//  b := Team.Create('Barcelona');
//  Albl.Caption := 'Arsenal';
//  Blbl.caption := 'Barcelona';
//  RatingA := 0;
//  RatingB := 0;
//  Bgoals := trunc(b.GetXG(0.8,5.00)+a.GetXC(0.7,3));
//  Agoals := trunc(a.GetXG(0.5,3)+b.GetXC(0.2,5));
//  if RatingA > RatingB then
//  begin
//    Agoals := RatingA - RatingB;
//    Bgoals := 0;
//  end
//  else
//  begin
//    Bgoals := RatingB -RatingA;
//    Agoals := 0
//  end;
//    AScorelbl.Caption := IntToStr(Agoals);
//  BScorelbl.Caption := IntToStr(Bgoals);
//  StartBtn.Enabled := false;
   aGoals := 0;
   bGoals := 0;
   for i := 1 to 10 do
     begin
       aGoals := aGoals + UFormationGraphic.Team1.Lineup[i].attack;
     end;
     bGoals := 30 - aGoals;
     aGoals := aGoals div 10;
     bGoals := bGoals div 10;
     AScoreLbl.Caption := intToStr(aGoals);
     BScoreLbl.Caption := intToStr(bGoals);
end;

end.
